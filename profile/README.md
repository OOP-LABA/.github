StudyLance

Веб сервис для дистрибуции репетиторства.
Цели и проблемы Создать сайт-платформу для фриланс-заданий, ориентированную на студентов вузов, позволяющую размещать и выполнять учебные задания с оплатой ниже репетиторских услуг. Это решение необходимо для уменьшения стоимости образовательных услуг и создания удобного и эффективного канала взаимодействия студентов-заказчиков и студентов-исполнителей. Бизнес получает источник дохода в виде комиссии, пользователи — доступный рынок услуг и безопасные сделки.

Контекст Система / подсистема: Онлайн-платформа фриланса для студентов (веб-приложение)

Связанные документы:
Источник постановки: сбор требований на основе обсуждений и анализа рынка образовательных фриланс платформ

Трассировка требований (ID Тип Описание)

BR_001 Бизнес-требование Создание платформы для публикации и выполнения заданий студентами

BR_002 Бизнес-требование Обеспечение системы безопасных сделок с залогом

FR_001 Функциональное Регистрация/вход пользователей с проверкой email

FR_002 Функциональное Размещение, редактирование и удаление заданий

FR_003 Функциональное Фильтры и поиск по университетам, курсам и др.

FR_004 Функциональное Система жалоб и запрета сообщений

FR_005 Функциональное Возможность стать исполнителем путем создания резюме

FR_006 Функциональное Мессенджер для общения заказчика и исполнителя

NFR_001 Нефункциональное Безопасность данных и сделок

NFR_002 Нефункциональное Высокая доступность и производительность (при нагрузке 500 rps в пике)

3.1 Диаграмма прецендентов

<img width="773" height="831" alt="image" src="https://github.com/user-attachments/assets/2c6cfa2b-bc13-47a7-b548-04310af0d0ec" />


Требования
4.1 Функциональные

1. Регистрация пользователей с валидацией email

2. Вход по username/email и паролю

3. Публикация заданий с полями: университет, направление, предмет, курс, дедлайн, описание, фото, цена

4. Отображение списка заданий с фильтрами (университет, курс, предмет, направление, дедлайн, дата публикации)

5. Карточка задания с полной информацией и действиями: редактирование, удаление (автором/админом), отклики исполнителей, выбор исполнителя и внесение залога

6. Личный кабинет пользователя с возможностью редактирования профиля

7. Просмотр чужих профилей с комментариями и рейтингом

8. Создание и редактирование резюме исполнителя

9. Система жалоб и запрета отправки сообщений пользователю

10. Мессенджер для обмена сообщениями между заказчиком и исполнителем в рамках платформы

11. Реализация топа исполнителей по рейтингу и отзывам

4.2 Нефункциональные 
1. Система должна обеспечивать безопасное хранение и передачу персональных данных пользователей. Аутентификация пользователей должна осуществляться с использованием токенов доступа (JWT).

2. Надежность и отказоустойчивость платформы, восстановление в течение суток в случае непредвиденных происшествий

3. Интуитивно понятный UI/UX для целевой аудитории

БД

5.1 ER-Диаграмма

<img width="788" height="1175" alt="image" src="https://github.com/user-attachments/assets/28accc0c-0c3c-4df7-96b5-2e9d3913c695" />


5.2 Основные сущности

1. users

Таблица пользователей, используемая для аутентификации и авторизации.

Поля:

id — первичный ключ
username — уникальный логин пользователя
password — хэш пароля (BCrypt)
email — уникальный email
is_banned — флаг блокировки пользователя
ban_reason — причина бана
banned_at — дата и время блокировки

2. roles и users_roles

Реализация ролевой модели доступа.
roles(id, name) — справочник ролей (ROLE_USER, ROLE_ADMIN)
users_roles(user_id, role_id) — таблица связи many‑to‑many

Особенности:
составной первичный ключ (user_id, role_id)
пользователь может иметь несколько ролей

3. cities

Справочник городов, используемый в профилях пользователей.

1.4 user_profiles

Расширенный профиль пользователя / резюме исполнителя. Связь 1:1 с таблицей users.

Поля:
user_id — первичный ключ и внешний ключ на users(id) (реализован через @MapsId)
first_name — имя
second_name — фамилия
city_id → cities(id) — город
headline — краткий заголовок профиля
about — описание
skills — навыки
portfolio — портфолио
contacts — контактная информация

1.5 categories

Справочник учебных предметов / категорий заданий.

Поля:
id — первичный ключ
name — уникальное название категории
is_verifiable — флаг «проверяемая категория»


6. posts

Задания (учебные таски), публикуемые заказчиками.

Основные поля:
id — первичный ключ
title — заголовок задания
content — описание задания
category_id → categories(id) — категория (обязательное поле)
created_at — дата создания
user_id → users(id) — автор задания
executor_id → user_profiles(user_id) — выбранный исполнитель (может быть NULL)
goal — бюджет / цена задания
raised — служебное историческое поле (используется как счётчик, по умолчанию 0)
account_details — контактная информация или реквизиты

Workflow‑поля:

status — статус задания: OPEN | IN_PROGRESS | DONE | CANCELLED
deposit_amount — сумма залога
deposit_status — статус залога: NONE | HELD | RELEASED | REFUNDED

Вложения (изображение):
avatar_data — бинарные данные изображения (bytea)
avatar_content_type — MIME‑тип (например, image/png)
avatar_filename — оригинальное имя файла
avatar_url — legacy‑поле для хранения URL (в текущей версии не используется)

7. comments

Комментарии к заданиям. В бизнес‑логике используются как отклики / офферы исполнителей.

Поля:
id — первичный ключ
content — текст отклика
user_id → user_profiles(user_id) — автор отклика
post_id → posts(id) — задание
created_at — дата создания

1.8 images (legacy)

Таблица для хранения дополнительных изображений по URL.
Статус: Отложено, теперь основное изображение задания хранится в таблице posts.

1.9 reviews

Отзывы и рейтинги пользователей по результатам выполнения заданий.

Поля:
id — первичный ключ
reviewer_id → user_profiles(user_id) — автор отзыва
reviewee_id → user_profiles(user_id) — получатель отзыва
post_id → posts(id) — задание, по которому оставлен отзыв
rating — оценка (1–5)
content — текст отзыва
created_at — дата создания

Ограничения:

один пользователь (reviewer_id) может оставить только один отзыв на конкретное задание (post_id)

10. complaints

Жалобы пользователей и механизм модерации.

Поля:
id — первичный ключ
reporter_id → user_profiles(user_id) — пользователь, подавший жалобу
target_user_id → user_profiles(user_id) — пользователь, на которого подана жалоба (опционально)
target_post_id → posts(id) — задание, на которое подана жалоба (опционально)
status — статус жалобы: OPEN | RESOLVED | REJECTED
admin_note — комментарий администратора
resolved_at — дата и время рассмотрения
resolved_by → users(id) — администратор, обработавший жалобу

Ограничения целостности:

должна быть указана как минимум одна цель жалобы (target_user_id или target_post_id)



